<main class="main">
  <section class="signup">
    <h2>Criar conta</h2>
    <p class="legend">Preencha os campos obrigatórios. Endereço, dados bancários e chave PIX são opcionais e podem ser adicionados depois.</p>

    <form [formGroup]="signupForm" (ngSubmit)="onSubmit()" novalidate>
      <!-- Tipo de conta -->
      <fieldset class="block">
        <legend>Tipo de conta *</legend>
        <label class="radio">
          <input type="radio" formControlName="type" value="Fisica" />
          Pessoa Física
        </label>
        <label class="radio">
          <input type="radio" formControlName="type" value="Juridica" />
          Pessoa Jurídica
        </label>
      </fieldset>

      <!-- Dados pessoais -->
      <fieldset class="block two">
        <legend>Dados pessoais *</legend>
        <div class="field">
          <label for="name">Nome</label>
          <input id="name" type="text" formControlName="name" placeholder="Ex.: Arthur" />
          <small class="error" *ngIf="f.get('name')?.touched && f.get('name')?.invalid">Informe seu nome.</small>
        </div>

        <div class="field">
          <label for="lastname">Sobrenome</label>
          <input id="lastname" type="text" formControlName="lastname" placeholder="Ex.: Rei dos bretões" />
          <small class="error" *ngIf="f.get('lastname')?.touched && f.get('lastname')?.invalid">Informe seu sobrenome.</small>
        </div>
      </fieldset>

      <!-- Conta (email/senha) -->
      <fieldset class="block two" formGroupName="conta">
        <legend>Acesso *</legend>
        <div class="field">
          <label for="email">E-mail</label>
          <input id="email" type="email" formControlName="email" placeholder="seu@email.com" />
        </div>
        <div class="field">
          <label for="confirmEmail">Confirmar e-mail</label>
          <input id="confirmEmail" type="email" formControlName="confirmEmail" placeholder="Repita o e-mail" />
        </div>
        <small class="error --full" *ngIf="mostrarErroEmail()">{{ mostrarErroEmail() }}</small>

        <div class="field">
          <label for="password">Senha</label>
          <input id="password" type="password" formControlName="password" placeholder="Mín. 6 caracteres" />
        </div>
        <div class="field">
          <label for="confirmPassword">Confirmar senha</label>
          <input id="confirmPassword" type="password" formControlName="confirmPassword" placeholder="Repita a senha" />
        </div>
        <small class="error --full" *ngIf="mostrarErroSenha()">{{ mostrarErroSenha() }}</small>
      </fieldset>

      <!-- Endereço (opcional) -->
      <fieldset class="block two" formGroupName="address">
        <legend>Endereço (opcional)</legend>
        <div class="field">
          <label for="logradouro">Logradouro</label>
          <input id="logradouro" type="text" formControlName="logradouro" placeholder="Rua, avenida..." />
        </div>
        <div class="field">
          <label for="numero">Número</label>
          <input id="numero" type="text" formControlName="numero" placeholder="Número" />
        </div>
        <div class="field">
          <label for="bairro">Bairro</label>
          <input id="bairro" type="text" formControlName="bairro" placeholder="Bairro" />
        </div>
        <div class="field">
          <label for="complemento">Complemento</label>
          <input id="complemento" type="text" formControlName="complemento" placeholder="Apartamento, bloco..." />
        </div>
        <div class="field">
          <label for="cidade">Cidade</label>
          <input id="cidade" type="text" formControlName="cidade" placeholder="Cidade" />
        </div>
        <div class="field">
          <label for="estado">Estado</label>
          <input id="estado" type="text" formControlName="estado" placeholder="UF" />
        </div>
      </fieldset>

      <!-- Dados bancários (opcional) -->
      <fieldset class="block two" formGroupName="bankDetails">
        <legend>Dados bancários (opcional)</legend>
        <div class="field">
          <label for="conta">Conta</label>
          <input id="conta" type="text" formControlName="conta" placeholder="Conta" />
        </div>
        <div class="field">
          <label for="agencia">Agência</label>
          <input id="agencia" type="text" formControlName="agencia" placeholder="Agência" />
        </div>
        <div class="field">
          <label for="tipoConta">Tipo de conta</label>
          <input id="tipoConta" type="text" formControlName="tipoConta" placeholder="Corrente / Poupança" />
        </div>
        <div class="field">
          <label for="titular">Titular</label>
          <input id="titular" type="text" formControlName="titular" placeholder="Nome do titular" />
        </div>
        <div class="field">
          <label for="cpfTitular">CPF do titular</label>
          <input id="cpfTitular" type="text" formControlName="cpfTitular" placeholder="Somente números" />
        </div>
      </fieldset>

      <!-- PIX (opcional) -->
      <fieldset class="block" formGroupName="pix">
        <legend>PIX (opcional)</legend>
        <div class="field">
          <label for="pixChave">Chave PIX</label>
          <input id="pixChave" type="text" formControlName="chave" placeholder="E-mail, CPF, telefone ou chave aleatória" />
        </div>
      </fieldset>

      <!-- Política -->
      <div class="block">
        <label class="check">
          <input type="checkbox" formControlName="aceitarPolitica" />
          Eu li e aceito a <a routerLink="/privacy">Política de Privacidade</a> e os <a routerLink="/terms">Termos de Uso</a>.
        </label>
        <small class="error" *ngIf="f.get('aceitarPolitica')?.touched && f.get('aceitarPolitica')?.invalid">
          Você precisa aceitar para continuar.
        </small>
      </div>

      <!-- Mensagens -->
      <p class="msg erro" *ngIf="erro()">{{ erro() }}</p>
      <p class="msg ok" *ngIf="sucesso()">{{ sucesso() }}</p>

      <button class="primary" type="submit" [disabled]="invalido()">
        {{ carregando() ? 'Enviando...' : 'Cadastrar' }}
      </button>
    </form>
  </section>
</main>
