<main class="bazar-main">
  <header class="bazar-header">
    <h2>Bazar</h2>

    <div class="controls">
      <label for="seller">Vendedor:</label>
      <input id="seller" type="text" placeholder="ID do vendedor"
       (change)="sellerChanged($any($event.target).value)">
      

      <label for="sort">Ordenar:</label>
      <select id="sort" [value]="sortBy()" (change)="sortByChanged($any($event.target).value)">
        <option value="recent">Mais recentes</option>
        <option value="price">Menor preço</option>
        <option value="rating">Melhor reputação</option>
      </select>
    </div>
  </header>

  <section *ngIf="loading(); else content" class="loading">
    Carregando ofertas…
  </section>

  <ng-template #content>
    <section *ngIf="!error(); else erro">
      <div class="grid">
        <app-offer-card
          *ngFor="let oferta of ofertasVisiveis()"
          [oferta]="oferta"
          (comprar)="addToCart(oferta)">
        </app-offer-card>
      </div>

      <div class="more" *ngIf="ofertasVisiveis().length < filtered().length">
        <button (click)="loadMore()">Carregar mais</button>
      </div>
    </section>

    <ng-template #erro>
      <p class="error">{{ error() }}</p>
    </ng-template>
  </ng-template>
</main>
